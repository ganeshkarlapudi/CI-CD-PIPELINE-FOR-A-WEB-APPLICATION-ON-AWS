# ============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================================================
# This file contains production-specific environment variables.
# IMPORTANT: Update all secrets and credentials before deployment!
# ============================================================================

# Application
NODE_ENV=production
PORT=3000
APP_BASE_URL=https://yourdomain.com

# Database - MongoDB Atlas or managed MongoDB
# Example: mongodb+srv://username:password@cluster.mongodb.net/aircraft_detection?retryWrites=true&w=majority
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/aircraft_detection
MONGO_POOL_SIZE=100
MONGO_CONNECT_TIMEOUT_MS=10000

# Redis - Redis Cloud or managed Redis
# Example: redis://:password@redis-host:port
REDIS_URL=redis://:password@redis-host:port
REDIS_SESSION_TTL=86400
REDIS_MODEL_CACHE_TTL=0
REDIS_INSPECTION_CACHE_TTL=3600

# Authentication - MUST CHANGE ALL SECRETS!
# Generate strong secrets: openssl rand -base64 64
JWT_SECRET=CHANGE_THIS_TO_STRONG_RANDOM_SECRET
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=7d
SESSION_SECRET=CHANGE_THIS_TO_STRONG_RANDOM_SECRET
BCRYPT_SALT_ROUNDS=12
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=30

# Storage - AWS S3
USE_LOCAL_STORAGE=false
AWS_S3_BUCKET=aircraft-images-prod
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
S3_SIGNED_URL_EXPIRATION=3600

# OpenAI API
OPENAI_API_KEY=your_production_openai_api_key
GPT_VISION_MODEL=gpt-4-vision-preview
GPT_VISION_MAX_TOKENS=1000
GPT_VISION_TEMPERATURE=0.2
OPENAI_MONTHLY_BUDGET=500
OPENAI_ALERT_THRESHOLD=80

# ML Service - Production URL
ML_SERVICE_URL=http://ml-service:5000
FLASK_ENV=production
ML_SERVICE_PORT=5000
ML_SERVICE_TIMEOUT=30000

# YOLO Configuration - Use larger model for production
YOLO_MODEL_PATH=./ml-service/models/yolov8m.pt
YOLO_CONFIDENCE_THRESHOLD=0.5
YOLO_NMS_IOU_THRESHOLD=0.45
YOLO_IMAGE_SIZE=640
YOLO_DEVICE=cuda

# Ensemble Configuration
ENSEMBLE_YOLO_WEIGHT=0.6
ENSEMBLE_GPT_WEIGHT=0.4
NMS_IOU_THRESHOLD=0.5
ENSEMBLE_MIN_CONFIDENCE=0.5

# File Upload
MAX_FILE_SIZE=52428800
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/tiff
MIN_IMAGE_DIMENSION=640
MAX_IMAGE_DIMENSION=4096
MAX_FILES_PER_UPLOAD=10

# Security - Strict for production
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CORS_ALLOW_CREDENTIALS=true
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=10
UPLOAD_RATE_LIMIT_WINDOW_MS=60000
UPLOAD_RATE_LIMIT_MAX_REQUESTS=20
HELMET_ENABLED=true
CSP_ENABLED=true

# Logging - Production level
LOG_LEVEL=info
LOG_DIR=./logs
ERROR_LOG_FILE=./logs/error.log
COMBINED_LOG_FILE=./logs/combined.log
WARNINGS_LOG_FILE=./logs/warnings.log
LOG_MAX_SIZE=20m
LOG_MAX_FILES=30d
LOG_CONSOLE_ENABLED=false
LOG_CONSOLE_COLORIZE=false

# Monitoring
PERFORMANCE_MONITORING=true
REQUEST_TIMEOUT=30000
DB_QUERY_TIMEOUT=10000
HEALTH_CHECK_INTERVAL=60000

# Email - Production email service
EMAIL_ENABLED=true
EMAIL_SERVICE=gmail
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your_email@gmail.com
EMAIL_PASSWORD=your_app_password
EMAIL_FROM=noreply@yourdomain.com

# Defect Classes
DEFECT_CLASSES=damaged_rivet,missing_rivet,filiform_corrosion,missing_panel,paint_detachment,scratch,composite_damage,random_damage,burn_mark,scorch_mark,metal_fatigue,crack

# Development & Debugging - Disabled for production
DEBUG=false
API_LOGGING=true
DB_LOGGING=false
MOCK_ML_SERVICE=false
SEED_DATABASE=false
