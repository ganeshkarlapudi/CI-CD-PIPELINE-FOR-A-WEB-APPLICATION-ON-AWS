# ============================================================================
# DOCKER ENVIRONMENT CONFIGURATION
# ============================================================================
# This file contains Docker-specific environment variables.
# Used by docker-compose.yml for containerized deployment.
# ============================================================================

# Application
NODE_ENV=production
PORT=3000
APP_BASE_URL=http://localhost

# Database - Docker MongoDB service
MONGODB_URI=mongodb://mongo:27017/aircraft_detection
MONGO_ROOT_USERNAME=admin
MONGO_ROOT_PASSWORD=admin123
MONGO_DATABASE=aircraft_detection
MONGO_POOL_SIZE=100
MONGO_CONNECT_TIMEOUT_MS=10000

# Redis - Docker Redis service
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=redis123
REDIS_SESSION_TTL=86400
REDIS_MODEL_CACHE_TTL=0
REDIS_INSPECTION_CACHE_TTL=3600

# Authentication - CHANGE THESE FOR PRODUCTION!
JWT_SECRET=docker_jwt_secret_CHANGE_ME_IN_PRODUCTION
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=7d
SESSION_SECRET=docker_session_secret_CHANGE_ME_IN_PRODUCTION
BCRYPT_SALT_ROUNDS=10
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=15

# Storage - Local storage in Docker volume
USE_LOCAL_STORAGE=true
UPLOAD_DIR=/app/uploads

# AWS S3 (if using S3 instead of local storage)
# USE_LOCAL_STORAGE=false
# AWS_S3_BUCKET=aircraft-images
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_REGION=us-east-1

# OpenAI API - Add your key
OPENAI_API_KEY=your_openai_api_key_here
GPT_VISION_MODEL=gpt-4-vision-preview
GPT_VISION_MAX_TOKENS=1000
GPT_VISION_TEMPERATURE=0.2
OPENAI_MONTHLY_BUDGET=100
OPENAI_ALERT_THRESHOLD=80

# ML Service - Docker service name
ML_SERVICE_URL=http://ml-service:5000
FLASK_ENV=production
ML_SERVICE_PORT=5000
ML_SERVICE_TIMEOUT=30000

# YOLO Configuration
YOLO_MODEL_PATH=/app/models/yolov8n.pt
YOLO_CONFIDENCE_THRESHOLD=0.5
YOLO_NMS_IOU_THRESHOLD=0.45
YOLO_IMAGE_SIZE=640
YOLO_DEVICE=cpu

# Ensemble Configuration
ENSEMBLE_YOLO_WEIGHT=0.6
ENSEMBLE_GPT_WEIGHT=0.4
NMS_IOU_THRESHOLD=0.5
ENSEMBLE_MIN_CONFIDENCE=0.5

# File Upload
MAX_FILE_SIZE=52428800
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/tiff
MIN_IMAGE_DIMENSION=640
MAX_IMAGE_DIMENSION=4096
MAX_FILES_PER_UPLOAD=10

# Security
CORS_ALLOWED_ORIGINS=http://localhost,http://127.0.0.1
CORS_ALLOW_CREDENTIALS=true
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX_REQUESTS=10
UPLOAD_RATE_LIMIT_WINDOW_MS=60000
UPLOAD_RATE_LIMIT_MAX_REQUESTS=20
HELMET_ENABLED=true
CSP_ENABLED=false

# Logging
LOG_LEVEL=info
LOG_DIR=/app/logs
ERROR_LOG_FILE=/app/logs/error.log
COMBINED_LOG_FILE=/app/logs/combined.log
WARNINGS_LOG_FILE=/app/logs/warnings.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=14d
LOG_CONSOLE_ENABLED=true
LOG_CONSOLE_COLORIZE=false

# Monitoring
PERFORMANCE_MONITORING=true
REQUEST_TIMEOUT=30000
DB_QUERY_TIMEOUT=10000
HEALTH_CHECK_INTERVAL=30000

# Email - Gmail SMTP Configuration
EMAIL_ENABLED=true
SMTP_USER=aircraftinspectorai@gmail.com
SMTP_PASS=jcco qjbh depr tgkn
# To get Gmail App Password:
# 1. Go to Google Account Settings
# 2. Enable 2-Factor Authentication
# 3. Go to Security > 2-Step Verification > App Passwords
# 4. Generate a new app password for "Mail"
# 5. Replace 'your_gmail_app_password_here' with the generated password

# Defect Classes
DEFECT_CLASSES=damaged_rivet,missing_rivet,filiform_corrosion,missing_panel,paint_detachment,scratch,composite_damage,random_damage,burn_mark,scorch_mark,metal_fatigue,crack

# Development & Debugging
DEBUG=false
API_LOGGING=true
DB_LOGGING=false
MOCK_ML_SERVICE=false
SEED_DATABASE=false
